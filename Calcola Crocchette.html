<html>

<head>

    <title> Calcolatore Crocchette 🐶 </title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/616/616408.png" type="image/png">

</head>

<body style="background-color: #fff8e1; background-size: contain; background-repeat: no-repeat; background-image: url('https://cdn-icons-png.flaticon.com/512/616/616408.png');">

    <br> <h1 style="color: #ff9800; text-align:center; font-size:80px"> CALCOLATORE CROCCHETTE </h1>

    <h2 style="color: #4a4a4a; text-align:center">
        <br><br> Inserisci i dati del tuo amico a quattro zampe 🐾
    </h2>

    <center>
        <form style="background-color:#ffffffcc; width:500px; padding:30px; border-radius:20px; box-shadow:0 8px 30px rgba(255,152,0,0.25);">

            <label style="font-size:20px;">
                Peso all'ultima visita (kg):<br>
                <input id="peso0" type="number" step="0.01" min="0" placeholder="es. 4.50" style="padding:10px; width:90%; border-radius:10px; border:2px solid #ffcc80;">
            </label><br><br>

            <label style="font-size:20px;">
                Peso attuale (kg):<br>
                <input id="peso" type="number" step="0.01" min="0" placeholder="es. 5.20" style="padding:10px; width:90%; border-radius:10px; border:2px solid #ffcc80;">
            </label><br><br>

            <label style="font-size:20px;">
                Età (mesi):<br>
                <input id="eta" type="number" step="1" min="0" placeholder="es. 2" style="padding:10px; width:90%; border-radius:10px; border:2px solid #ffcc80;">
            </label><br><br>

            <label style="font-size:20px;">
                Crocchette all'ultima visita (g):<br>
                <input id="crocche0" type="number" step="1" min="0" placeholder="es. 200" style="padding:10px; width:90%; border-radius:10px; border:2px solid #ffcc80;">
            </label><br><br>

            <button id="calcola" type="button" style="padding:10px 20px; border:none; border-radius:10px; background-color:#4caf50; color:white; font-size:18px; cursor:pointer;">Calcola 🦴</button>
            <button id="reset" type="button" style="padding:10px 20px; border:none; border-radius:10px; background-color:#ffb300; color:white; font-size:18px; cursor:pointer;">Reset 🧽</button>

            <div id="output" style="display:none; margin-top:20px; background-color:#c8e6c9; color:#2e7d32; padding:15px; border-radius:10px; font-weight:bold;"></div>
            <div id="debug" style="color:#555; margin-top:10px; font-size:14px;"></div>

        </form>
    </center>

    <script>
        const el = id => document.getElementById(id);
        const fmt = (n, d = 2) => Number(n).toFixed(d).replace('.', ',');

        function calcolaDose() {
            const peso0 = parseFloat(el('peso0').value);
            const peso = parseFloat(el('peso').value);
            const etaMesi = parseFloat(el('eta').value);
            const crocche0g = parseFloat(el('crocche0').value);

            const output = el('output');
            const debug = el('debug');

            if (!peso0 || peso0 <= 0) { output.style.display = 'block'; output.textContent = "🐾 Inserisci un peso precedente valido!"; return; }
            if (!peso || peso <= 0) { output.style.display = 'block'; output.textContent = "🐾 Inserisci un peso attuale valido!"; return; }
            if (!Number.isFinite(crocche0g) || crocche0g < 0) { output.style.display = 'block'; output.textContent = "🍪 Inserisci una quantità di crocchette valida!"; return; }

            const etaAnni = (isNaN(etaMesi) ? 0 : etaMesi / 12);
            const crocche0Kg = crocche0g / 1000;
            const croccheNuovaKg = crocche0Kg * (peso / peso0);
            const croccheNuovaG = croccheNuovaKg * 1000;

            output.style.display = 'block';
            output.innerHTML = `🍖 Nuova dose consigliata: <strong>${fmt(croccheNuovaG, 2)} g</strong> (≈ ${fmt(croccheNuovaKg, 3)} kg)`;

            debug.textContent = `Età: ${isNaN(etaMesi) ? '-' : etaMesi + ' mesi'} (≈ ${isNaN(etaMesi) ? '-' : fmt(etaAnni, 2)} anni). Calcolo: ${crocche0Kg} kg × (peso attuale / peso precedente) = ${croccheNuovaKg} kg.`;
        }

        function resetForm() {
            ['peso0', 'peso', 'eta', 'crocche0'].forEach(id => el(id).value = '');
            el('output').style.display = 'none';
            el('debug').textContent = '';
        }

        el('calcola').addEventListener('click', calcolaDose);
        el('reset').addEventListener('click', resetForm);

        ['peso0', 'peso', 'eta', 'crocche0'].forEach(id => {
            el(id).addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); calcolaDose(); } });
        });
    </script>

    <p style="color: #4a4a4a; text-align:center; margin-top:40px">© Calcolatore Crocchette 2025</p>

</body>

</html>
